#!/bin/bash

set -x
set -e


# set node controller IP for "internal" network
if [ ! -e /etc/waggle/node_controller_host ] ; then
  echo "10.31.81.10" > /etc/waggle/node_controller_host
fi

if [ ! -e /etc/waggle/node_id ] ; then
 source /usr/lib/waggle/waggle_image/scripts/create_node_id.sh
fi

# workaround  (fix later):
cp /etc/waggle/node_id /etc/waggle/hostname

#change this to offline install
./scripts/install_dependencies.sh

# daemons
ln -sf /usr/lib/waggle/guestnodes/scripts/communicator.sh /etc/init.d/communicator.sh
update-rc.d communicator.sh defaults 





